= Задание 3. Создание программной системы c Qt интерфейсом на С++.

Выполнить объектную декомпозицию, разработать формы интерфейса, диаграмму
состояний интерфейса, диаграммы классов интерфейсной и предметной областей, диаграмму последовательностей одной из реализуемых операций.
Разработать, протестировать и отладить программу в среде Visual Studio или QT Creator.

База данных коммерческого магазина содержит сведения о товарах: наименование и
марка товара, дата поступления, количество штук, установленная цена, страна -
производитель.

Программа должна в интерактивном режиме формировать файл, добавлять и удалять данные, а также воспринимать каждый из перечисленных запросов и давать на него
ответ.

. Определить, есть ли в магазине указанный товар производства данной страны.
. Определить, можно ли приобрести за данную сумму и, если да, то, сколько телефонных аппаратов каждой марки (выбрать все варианты по схеме "наименование и марка - максимально возможное количество").
. Определить, на какую общую сумму поступили товары, начиная с указанной даты.
. Построить график поступления заданного товара по датам.

== Анализ задания
По условиям задачи необходимо выполнять поиск данных, получение, изменение, создание и агрегацию.
Также обязательным условием является интерактивное создание файла в файловой системе.
Для решения задачи можно использовать СУБД SQLite3. В ней создать таблицу `products` и выполнять SQL запросы к этой таблице.
В качестве интерфейса для работы с СУБД можно воспользоваться частью библиотеки Qt, библиотекой `QSqlDatabase`.

== Таблицы и тексты

.Структура таблицы `products`
[source,sql]
----
CREATE TABLE products (
	title VARCHAR NOT NULL, -- название модели
	brand VARCHAR NOT NULL, -- марка телефона
	receiptDate VARCHAR NOT NULL, -- дата поставки. ISO 8601
	amount INT NOT NULL, -- количество товара
	cost INT NOT NULL, -- цена за штуку
	producer VARCHAR NOT NULL -- страна-производитель
)
----

.Реализация запроса для функции №2
[source,sql]
----
SELECT
  title,
  brand,
  min((:cost / cost), amount) AS maxCount
FROM products
WHERE cost < :cost
----

.Объектная декомпозиция
[plantuml]
....
include::docs/object-decomp.pu[]
....

.Граф состояний пользовательского интерфейса
[plantuml]
....
include::docs/ui-graph.pu[]
....

.Диаграмма классов интерфейсной и объектной области
[plantuml]
....
include::docs/qt.pu[]
....

.Диаграмма последовательностей функции отображения графика поставок
[plantuml]
....
include::docs/sequence.pu[]
....

== Реализация программы
=== Код программы

.Код главного окна mainwindow.cpp
[source,cpp]
----
include::mainwindow.cpp[]
----

.Код окна проверки наличия товара checkwindow.cpp
[source,cpp]
----
include::checkwindow.cpp[]
----

.Код окна таблицы возможной покупки counterwindow.cpp
[source,cpp]
----
include::counterwindow.cpp[]
----

.Код окна суммарной стоимости за определённую дату summarywindow.cpp
[source,cpp]
----
include::summarywindow.cpp[]
----

.Код окна построения графика поступления товара chartwindow.cpp
[source,cpp]
----
include::chartwindow.cpp[]
----

.Код подключения СУБД SQLite3 initDb.cpp
[source,cpp]
----
include::initDb.cpp[]
----

<<<

=== Формы пользовательского интерфейса

.Главная форма-редактор
image::docs/forms/main.png[]

.Форма проверки наличия товара на складе
image::docs/forms/exists.png[]

.Форма потенциального приобретения
image::docs/forms/get.png[]

.Форма получения стоимости товара на определённую дату
image::docs/forms/sum.png[]

.Форма построения графика поступления товара
image::docs/forms/graph.png[]

== Вывод
Я получил практические знания реализации форм с помощью Qt Designer, опыт работы с SQL-запросами с помощью библиотеки Qt и постоения графиков с помощью QChart.
